import React, { useEffect } from 'react';
import Header from "../../components/Header/index";
import moment from "moment";
import useAuth from '../../hooks/useAuth';
import * as C from './styles';


function Host() {
  const { results, getAssets } = useAuth();

  useEffect(() => {
    getAssets()
  },);

  return (
    <>
    <Header />
    <C.Container>
      <C.Title>About Volun Count</C.Title>
      <C.Container>
        <C.Table>
          <thead>
            <tr>
              <C.Th>Name</C.Th>
              <C.Th>Risk</C.Th>
              <C.Th>Volun Count</C.Th>
              <C.Th>IP Address</C.Th>
              <C.Th>Created</C.Th>
              <C.Th>Modified</C.Th>
            </tr>
          </thead>
          <tbody>
            {
            results
            ?.sort((a, b) => b.vuln_count - a.vuln_count)
            ?.map((el, index) => (
              <tr className='row' key={index}>
                <C.Td>{el.hostname}</C.Td>
                <C.Td>{el.risk}</C.Td>
                <C.Td>{el.vuln_count}</C.Td>
                <C.Td>{el.ip_address}</C.Td>
                <C.Td>{moment(el.created).format("DD/MM/YYYY")}</C.Td>
                <C.Td>{moment(el.modified).format("DD/MM/YYYY")}</C.Td>
              </tr>
            ))}
          </tbody>
        </C.Table>
      </C.Container>
    </C.Container>
    </>
  );
}

export default Host;